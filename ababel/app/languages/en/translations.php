<?php
return [
    'cdad152c14b74aabe150e4dcc4385ff9' => 'View Expense',
    '01346c175aeb33a3702462fe1e8d283f' => '📄 Expense Details',
    'ad91d3d2221e7a2be1d7ab1d5713e4e2' => 'Date:',
    '3ca434741784c96b1591d14d3e7967ee' => 'Expense Type:',
    '33d29c3a22bcff87b5a1482a71481266' => 'Payment Method:',
    '8a089f2b73bc248405a752ce409a2eb8' => 'Amount:',
    '92853df9d29f663f77077bc4a69a922c' => 'Pound',
    '548eb5015f73af6589704a660dd9efaa' => 'Notes:',
    '131ee718f892d80e2c79b317bed23457' => '⬅ Back to Office Expenses',
    '19d12c26ee79109d7ce294986f716e15' => 'Missing Permissions',
    '5393a629fdca1cd041b400f5e27cd07e' => '🚫 You do not have permission to access this page',
    '808399cd18839560b8b5dfb400e35f4b' => 'Please refer to management or use the appropriate page for your permissions.',
    '9ac45261a762a28404dfc3dfff68b8e9' => '⬅️ Back to Home Page',
    'e3421d425b9e9e168df050b587762c55' => 'query("SELECT COUNT(*) AS total FROM containers WHERE office = \'China\' AND seen_by_port = 0");
  $row = $stmt->fetch_assoc();
  $unseen = $row[\'total\'];
}

if ($unseen > 0) {
  echo \'',
    '7b5b656df1e8c78408baeba721ba9763' => 'Register Financial Transaction',
    '81d6adb87afc7bca489d7243d1cb4aa9' => '🧾 Register Financial Transaction',
    'faba469ec7ae3c024c92ccc6ef1943bd' => 'Amount',
    'f0ad26029dac3633ade6713044c70c0d' => 'Statement',
    'a2b4e4e4fc8865ba15c6ae5787720231' => 'Select Statement',
    '4c9d95c7a575acade2f192077264e37d' => 'Stamping',
    '087737af9dfa3121a3cdf9ad91273bd2' => 'Register',
    '625a77bd67289bef71b6adcf3c359964' => 'Ports',
    '84f09dd8b4833ac9d0b0cf384d8267f8' => 'Floors',
    '93aa38f2961633c8510baf9d69be91af' => 'Link Container (Optional)',
    '6b556a28aed6d2afa9bb2a16f134a14a' => 'Select Linked Container',
    'ff61a668fad9cb48256742a160b15170' => '💾 Save Transaction',
    '12ebb6290f097632a14308aa0ccc990c' => 'Register Payment Form',
    'f717446bea24b65d87bd5a81e3b915b9' => '🧾 Register Payment Form',
    'fb6661904bd1bb87e10618c38982ac7f' => 'Client Name:',
    '6f1b6776a1cb600a032bc997a792e5c3' => 'Select',
    '8e23912093d2da975fc559aa24f38df3' => 'Amount in Pounds:',
    'cb2fe9b81911558ab15042c02ab4d71d' => 'Cash',
    'e2cc6d493e7aae6a84c2275962851c45' => 'Your Bank',
    '45c693973a93b76da57500e631c81cee' => 'OKash',
    '2adb4ae8ab27571f2c2a03583a2beca7' => 'Fawry',
    'eec50ea9b4e4f857b844e74fa820be4e' => 'Check',
    '08b0f522d722eeca8653b52889af08c4' => '💾 Save Operation',
    '0079926980095281ef2d8e3fe7d74ccc' => 'New Register Request',
    'ecbb436d9bf929bcb99b4d0060b28ade' => '📝 Register Claim Data',
    'ec59058d26985658f99c4c2a22f188f4' => 'Register Name:',
    'e67661af82f48d06f02cd7c0a91c9904' => 'Client Number:',
    '652a681b70962e8cb04e522ea966614b' => 'Loading Number:',
    'aa0bc9ecdd0c18e6ecf9735571985629' => 'Carton Count:',
    '6a65c195cb2cbece2bc55d479102e020' => 'Custom Station:',
    'c731e3b6e8e744eb635bbbc614c8cae5' => 'Goods Type:',
    '56201581ccc6debc3d0f8b369a2438b1' => 'Container Number:',
    '264cc375b0e6569c585079624f500792' => 'Purchases:',
    'd37aa011d4aeafc7923549ec6e6be279' => 'Certificate Number:',
    'ab5e0918ce686eb4def1c9a2eca544e4' => 'Customs Amount:',
    '41493d17cbcdf64690449e883d126c33' => 'Claim Value:',
    '441ebbfb693dbd89aa4d517280a1ea60' => 'Unloading Place:',
    '1322ed220327c537f2502dfd97d00919' => 'Carrier Company:',
    '06744612859bd992db13828165c4be47' => 'Bill of Lading Number:',
    'f3ae83af479174b74ce37f7a58bf6737' => 'Refund Value:',
    '1eb4439d0ed47c524625ef2a6d69a2da' => 'Refund Type:',
    'afe0c5250983991c03102e1f3ecbb7e9' => 'Part of Container',
    '3fe5449aa469382607876856e723ea3b' => 'Full Container',
    '71093edc2476aa88d8c9c169a82369c0' => '🚚 Manifest Data',
    '7fc6046f921bbc909a99476a184b035e' => 'Manifest Number:',
    '77f8e6a20742a8bec9ade784c21e8845' => 'Driver Name:',
    'ae49760a10604bb25234d671f4ab118f' => 'Driver Number:',
    'a022f3d76fbff02078167e3df12d2133' => 'Transferee Name:',
    '1bfd4f5c849d3d1a5d4c42289fc822f5' => 'Nolon:',
    '8e81b7248e4a7eccfd39d1b72d03047b' => 'Commission:',
    '7643d16c7fb3335821585b84762b29d0' => '💾 Save Request',
    'be916d9287293aa497f79b9d8c16a3df' => '// Function to enable/disable form fields except loading number
  function toggleFormFields(disabled) {
    $(\'#registerForm input, #registerForm select\').not(\'#loading_number\').prop(\'disabled\', disabled);
  }

  // Disable fields on page load (wait for valid loading number)
  toggleFormFields(true);

  $(\'#loading_number\').on(\'blur\', function () {
    let loadingNumber = $(this).val().trim();
    let $errorDiv = $(\'#loading_number_error\');

    if (loadingNumber.length === 0) {
      $errorDiv.hide();
      toggleFormFields(true);
      return;
    }

    $.get(\'fetch_loading_data.php\', { loading_number: loadingNumber }, function (data) {
      console.log(data);
      if (data.status === \'success\') {
        // Fill fields
        $(\'#client_code\').val(data.client_code);
        $(\'#client_name\').val(data.client_name);
        if (data.register_id && data.register_name) {
          $(\'#register_id\').html(`',
    '493978c5376b08eb4ff4d60954f4865f' => '`);
        }
        $(\'#carton_count\').val(data.carton_count);
        $(\'#custom_station\').val(data.custom_station);
        $(\'#category\').val(data.category);
        $(\'#container_number\').val(data.container_number);
        $(\'#unloading_place\').val(data.unloading_place);
        $(\'#carrier\').val(data.carrier);
        $(\'#bill_number\').val(data.bill_number);
        $(\'#driver_name\').val(data.driver_name);
        $(\'#driver_phone\').val(data.driver_phone);
        $(\'#claim_amount\').val(data.claim_amount);

        // Hide error and enable fields
        $errorDiv.hide();
        toggleFormFields(false);

      } else if (data.status === \'exists\') {
        $errorDiv.text(\'⚠️ Loading number already used - please check the list\').show();
        toggleFormFields(true);
        clearFieldsExceptLoading();

      } else if (data.status === \'error\') {
        $errorDiv.text(\'❌ Container not found with this number\').show();
        toggleFormFields(true);
        clearFieldsExceptLoading();
      }
    }, \'json\')
    .fail(function() {
      $errorDiv.text(\'❌ Server connection error, try later\').show();
      toggleFormFields(true);
      clearFieldsExceptLoading();
    });
  });

  function clearFieldsExceptLoading() {
    $(\'#registerForm input, #registerForm select\').not(\'#loading_number\').val(\'\');
    $(\'#register_id\').html(`',
    '2c885168d6dd156abc0534c67b19ffcd' => 'query("SELECT SUM(amount) as total FROM cashbox WHERE type = \'In\' AND source = \'Manifesto\'")->fetch_assoc()[\'total\'] ?? 0;
$sum_out = $conn->query("SELECT SUM(amount) as total FROM cashbox WHERE type = \'Out\' AND source = \'Manifesto\'")->fetch_assoc()[\'total\'] ?? 0;
$balance = $sum_in - $sum_out;

// Filtering
$type = $_GET[\'type\'] ?? \'\';
$from = $_GET[\'from\'] ?? \'\';
$to = $_GET[\'to\'] ?? \'\';
$where = "cb.source = \'Manifesto\'";

if (isset($_GET[\'type\']) && in_array($type, [\'In\', \'Out\'])) {
    $where .= " AND cb.type = \'$type\'";
}

if ($from && $to) {
    $where .= " AND DATE(cb.created_at) BETWEEN \'$from\' AND \'$to\'";
}

// Get transactions
$res = $conn->query("
    SELECT cb.*, u.full_name AS user_name
    FROM cashbox cb
    LEFT JOIN users u ON cb.user_id = u.id
    WHERE $where
    ORDER BY cb.id DESC
    LIMIT 100
");

if (!$res) {
    echo "',
    '75d4f5a7d27d33ef59f5089feb776eef' => 'Query error: " . $conn->error . "',
    '08c9aacc996cfca07a77e0d8bcd71d2e' => 'Manifesto Vault',
    'b5fd992d7c1357adf88c7db5daf0898a' => 'Manage shipping commission collections',
    '8604f81ddd01d321bed2ee14e479a1a9' => 'Manifesto Vault Balance',
    '61abc601d33b5ccf811de285924d3839' => 'Filter Transactions',
    '9690bd5349188123cbaacd5674e8e450' => 'All Types',
    '1cb694e496dc4214a1747a8f66b7f44a' => '>In',
    '4451ed6ef070011b71acb5281925aed9' => '>Out',
    'f987d9f257a8b52150e4095ecbe69095' => 'Latest Transactions',
    '8456f22b477c37e27302d590f551eff2' => 'Date',
    'bfc57c26c3ae54b75ed10e9593400db1' => 'Transaction No.',
    'a70b017205ae4edff63b0c174a9d4756' => 'Type',
    '566639f142faacb8d1cdd03af25ddaa1' => 'Method',
    '98e353d2e345eb8b97e8c29346935b1d' => 'Employee',
    '3cd32fbbf1f15daef0cbdf891729b768' => 'No transactions to display',
    'a6465e28d6c929cd54a8d96b9f48526d' => 'Use filters above or add new transactions',
    'c7dee3f2603bd9203dff44ea9e909115' => 'Floors Payment Form',
    '2a58a148d4194dfbd59924dcab5d566c' => '🧾 Floors Payment Form',
    '2c7f9dd71a677189f76aab705222b621' => 'Clients List',
    'f2d2d39181b87743fbfecbb59c243889' => '📋 Clients List',
    'ff926b363a3be0cabf8054fdb7b97efe' => '➕ Add Client',
    '6994f7702f4bda246415667e9f8bf7b4' => '🏠 Back to Home',
    '2e8b171b46d137798846fbfc2796973c' => 'Name',
    '1f41be3824d0f6af39fefa6242a4fa35' => 'Code',
    '76f2f18e84162a4b86c62cba02b512d8' => 'Phone',
    'cb4588d3c0a208dd4ba343e8e675e003' => 'File',
    '3f882bf73021ed56679e4772c463aa02' => '" class="view-link">👁️ View',
    '4f13d145d8f61808297a0664ac23e250' => '📦 Expenses on Purchases',
    '1a42c2a47dc651199fec71b5eab3eec9' => '🔢 Loading Number:',
    'bde843d44de7ceb1f1c63320a3cf15c3' => '📇 Client Number:',
    'd3ef1ad3fdc3952c1f84e7680206aff3' => '👤 Client Name:',
    '5edb7aa0c1ce01c5eccdc40b9a6e6798' => '🚛 Container Number:',
    'e44b76af6d207fb908a0d5b0d8855ccc' => '💰 Customs:',
    'fbc889c9ce6d4e7f0a5e9fe255527d83' => '➕ Customs Added Value:',
    'd9d0aebf327d05e2988ab158e9596ce2' => '📄 Manifest:',
    '4f49e74b37b27c405334c794bef55ca4' => '➕ Manifest Added Value:',
    'e86b875394c7003f0f2cbe6533eb81bf' => '🏦 Customs Business Profits:',
    '0b0950cf590a5d533cfa51bc5b012e02' => '🚢 Ports:',
    '8c3bdd9964e4010201b56d03ecef78aa' => '➕ Ports Added Value:',
    'e556d7ceeca727488fc8677cacf9852c' => '📝 Authorization Amount:',
    '8edaaaa8cb7feab80c6dfe70ec37f2f6' => '➕ Authorization Added Value:',
    '47c76f1fa94b94b615d76ac974b8eb01' => '🏗️ Floors:',
    'b049967c4a7ddf4b66b66bcbee1b73a9' => '➕ Floors Added Value:',
    '2016d41da2997efcc7a148d2710b75cc' => '💾 Save',
    'd6f6ef4df28ec3c0a7c41ac01239b4f9' => 'Expense Receipt',
    '6b190a453eabc68bb9a28265dd75ee65' => 'Ababil Development and Investment Company Limited',
    'bb7a1904be43706de2294232b7bee705' => 'Office Expense Receipt',
    'db291baf0d10c7350a9f5e768b1092d6' => 'Receipt Number:',
    '0d17f7d091db5fd87f8a58122e2183a2' => 'Notes:',
    '4edb842763f10c021c19368d37f50d2d' => 'This receipt was issued on the above date to document the disbursement of the specified amount.',
    '4e18bfe5caeccf07d0f191fe1cc9ba3f' => 'CFO Signature: ____________________',
    '3a014e47a9a319bf914ffec7d1615702' => '🖨️ Print',
    '322135e9ecb76c1b0a27da911834ade5' => '📁 Documents - Ababil Company',
    '7875ec3fa157a5b6ff9fceb9da310ed3' => '📁 Documents Section',
    '44645cb334cc452fdfc2270a4a54ecc5' => '📤 Upload New Document',
    '2dc87ee56caad97c92e14582909e7b84' => 'Document Name:',
    '7954d26bcc467ff499f58b4032a3555c' => 'File:',
    'a9918e76df58a1f1aade197a6ff12bfb' => 'Document Type:',
    '887cd04ddae2d5bf9d1d92cf942ae7dd' => 'Receipt/Container Number (Optional):',
    'f4d8e6a8f6dc5ac25e467447e34cba72' => 'Upload Document',
    '6d6ffac8b648079bd9f5ba2e16c131ca' => '⬅️ Back to Dashboard',
    '48a1fa98991d60001d5d5936ceb07f16' => '📚 Documents List',
    'c20fa87a4f4493e885f1432fc042449b' => 'Filter by Type:',
    'f5a91dc4383f82a65151eb7944d01846' => '-- All --',
    'e8d786e64109d2de7353cdd104ee45cd' => 'Filter by Date:',
    '64f9298d91954793f54a5fa88ced4565' => 'Apply Filters',
    '3b2426206acbca409cc1a48d0d5cef44' => 'Linked Number',
    '3c4208fe6aad23122276655c682fea26' => 'Notes',
    '1d6a861756317b67713d83c021d62d8d' => 'Delete',
    'ada91c673d420322905df093f5d506a3' => '" target="_blank" class="btn btn-sm btn-primary">View',
    '88d6d1eacb3b0748ead3cffd3271e728' => '" class="btn btn-sm btn-danger" onclick="return confirm(\'Are you sure you want to delete this document?\')">🗑️ Delete',
    '72163673edef874cfac2576a068dad38' => 'No documents matching the filter.',
    '2ac0e25052173decfa50955dd71dfcbf' => 'query("SELECT SUM(amount) as total FROM cashbox WHERE type = \'In\' AND source = \'Register\'")->fetch_assoc()[\'total\'] ?? 0;
$sum_out = $conn->query("SELECT SUM(amount) as total FROM cashbox WHERE type = \'Out\' AND source = \'Register\'")->fetch_assoc()[\'total\'] ?? 0;
$balance = $sum_in - $sum_out;

// Filtering
$type = $_GET[\'type\'] ?? \'\';
$from = $_GET[\'from\'] ?? \'\';
$to = $_GET[\'to\'] ?? \'\';
$where = "cb.source = \'Register\'";

if (isset($_GET[\'type\']) && in_array($type, [\'In\', \'Out\'])) {
    $where .= " AND cb.type = \'$type\'";
}

if ($from && $to) {
    $where .= " AND DATE(cb.created_at) BETWEEN \'$from\' AND \'$to\'";
}

// Fetch transactions
$res = $conn->query("
    SELECT cb.*, u.full_name AS user_name
    FROM cashbox cb
    LEFT JOIN users u ON cb.user_id = u.id
    WHERE $where
    ORDER BY cb.id DESC
    LIMIT 100
");

if (!$res) {
    echo "',
    '1b07a06c88c433366fe62634709e7a48' => 'Register Vault',
    'd9f056e77102f99ef58fc84a120b4f87' => 'Manage cash in/out operations related to register',
    'd877080543d4989a62285699299b9c0f' => 'Register Vault Balance',
    '2d0d018dd6fb7237c63b72669ee7445e' => 'Use filters above or add new operations via payment journals',
    'f34784840cdccf90c3effd5714e5944c' => 'Print Register Request',
    '4181a92f6fc0e5b296505312841d6582' => 'Ababil Development and Investment Company',
    '80b07e09a6f645850231d8c6a20427ad' => 'Tax ID: 300001127808',
    'a1ef29e60aef4b6d0e0a8e4da42f24a5' => '🧾 Register Request Receipt',
    '4a93210fe0de18f71770e36961e70642' => 'Register Name',
    'c3f9bd481008e479a207c19f7d4a39e7' => 'Client Number',
    '2b9848ef0e38427345e4b18179dd2604' => 'Client Name',
    '874515d2cecae95c68b91db75e318aee' => 'Loading Number',
    '6462e69bfb3ea75662cd022cad931f44' => 'Container Number',
    'fdebedd80490a659783355f2221360c0' => 'Purchases',
    '0fb58c7e48d4be0e7a5bfefd9f6675bf' => 'SDG',
    'ea785d6d7f067f98ec17950a64b8eda4' => 'Claim Value',
    'de2ebbd6086523219f19395ff1d22009' => 'Unloading Place',
    '9255eba72e3457fe1b017bbb2328ab4d' => 'Manifest Number',
    'de6d68091d2152ca165bac5df47dff14' => 'Transferee Name',
    'ba7d8522b5a68eb2ffc3c34024a3cecf' => 'Nolon',
    'f109e12dd4a66504be2356e51fdfe417' => 'Commission',
    '4486033ba45305a34be04632edbc88db' => 'Amount in Pounds',
    'a8f32f9b23f36582305fd269a49db8a0' => 'In Dollars',
    '97ce076e8ae237ac204a3b2b7b8c4de0' => 'Options',
    'a927a2eb9875acca62d0c4085deb13e8' => 'Hospitality',
    '96afa5fe22900d475738789d8d8019dd' => 'Other',
    '4a1f9aac4b18b62d491a13db438d37b1' => '➕ Add Item',
    'cadff0ad41a6945d1f4ed477986c4c2a' => '🖨 Print Invoice',
    'aad5385a75d68dea7d11b88c91da652a' => 'Invoice Number',
    'dc693751c7da536b8d2682f4718da46c' => 'Invoice Date',
    '987ff80a90ced99b1eba2128200ee17e' => 'Buyer Name',
    '77c42d3b582589f32a087885dcc47d96' => 'Item',
    '1f133ec3882562c2d98d0f2d7a993bb1' => 'Carton Count',
    'aa32bbbeeb7f2b156b9c120b5ff942f0' => 'Invoice Value',
    'c0874632a137196735bbcb516673be3a' => 'Added Value',
    '6b3abb14052f70e2105d9f2594af8a6b' => 'Profit Report',
    'c110ca763d4c7930d5b1c92d1bd5bff2' => '📊 Profit Report',
    '6d08f19681af3f6c605405f239a11388' => 'All',
    'be484d14e8d6589ce62568c5e8b2b82f' => '🔍 Filter',
    'b02438a89e121f13395a58daa4c6e312' => '🖨️ Print Report',
    'e6e6d5fbc118e8b956ecde5ed8091c1b' => 'Item',
    '8f76755e9b4079d8d69acc04e17c513c' => 'Income',
    'c6ed35cee19e69fa99c8784d74248a5e' => 'Cost',
    'daba9a57a5e9eb5955c0346aaa9f1aad' => 'Profit',
    '5a2f91f5e30dadf521bb239e390ec9fe' => 'Percentage (%)',
    'd32d3e61d514564d1a60b47df29913f5' => 'Total Profit',
    '34a11f97135c83a7d12fe30a4f971c4c' => 'Deduct Office Expenses',
    '19a5951b4676362386f903912d6e5750' => 'Deduct Government Procedures',
    '3b97e4a1e73275d60a2cb6a3b64f8bcb' => 'Net Profit',
    '273e55f6517dabe0a3693e45b7480bb5' => 'Print Profit Report',
    '8c62c9edb593b324af9c20aaa838688a' => 'Edit Container Data',
    'd3cb8013f06b1a9f3d4a215dc9e90486' => '✏️ Edit Container Data',
    'a0fafd91d29b439d28d32af7519bf64f' => 'Shipping Date',
    'e84119812f6f35a234581c1ff2679f5f' => 'Bill of Lading Number',
    'c9d1d153d2169916d8e10d630e216664' => 'Carrier Company',
    'ec4337ed97e7a86fa02c645612a8ad21' => 'Register',
    '5b50e4b201c3615995fa2c4740e77fd0' => 'Select Register',
    '67e19f82059ed506ee27e9f5dc2fd931' => 'Weight',
    '8cab215e63f3acfdccd3fda55ed3b473' => 'Expected Arrival Date',
    'b4cd640f0176b50768975abf3031d4fa' => 'Ship Name',
    '4089ebaa8d913a3c60a11862512f8437' => 'Custom Station',
    '9239f2c711efc606022edd754d8b8dcc' => 'Released',
    '842973cf9175fcb559a8e26f69eccf38' => '>No',
    'f6a0a0bc575fcac9c6b432b69c5d0314' => '>Yes',
    '7901aad8cc6b55ece2eadafb7220a461' => 'Released by Company',
    'd36e572a225d427ab31035d413980dfd' => 'Office Name',
    '2b47311e5ac9365f240f3f2e4f14d274' => '💾 Save Changes',
    '11e8376737741d642101a36ff78b995a' => 'Back',
    '9155743607e39178a89142d315cb2832' => '⚠️ The requested expense does not exist in the database.',
    'cbb5896099cbe9ee430c5ee5c598e081' => 'Print Journal',
    '24b87626d18da34e69c845c1a3870e37' => 'Port Sudan Office',
    'f085710c1cc94b5f4cd7aeb08aa5666c' => 'Number (',
    '797d7318c8c1377be44b5fdf5bc9ce80' => 'Office Receipt',
    'e1ac990c636d2678a008e0a3874687ce' => 'M',
    'a0a1a9a47a06f98774b4f4532c6b342c' => 'Disbursed Amount',
    '04476f5afdc8d45664c24dcbee960327' => 'Amount in Dollars',
    'e09b8c9f37409b3597dd1bf619ff0664' => 'Receipt Number',
    '92be00a7a2337df72abda35bb04611e2' => 'Journal',
    '88fc73ebc871f609a52146b462d3fc04' => 'Total',
    'db9b0c963b3a3e17d4e106f99fe7ed9e' => 'Coordinator Name:',
    '096f9c3d26353590a4b1f4076e6732db' => 'Office Manager:',
    'df9cac0a5573c143257b9974f3ec3469' => '🔙 Back to List',
    'b35fa6f587ab601e071925fc1850733f' => 'View Journal',
    '8a84a1cb57612cbcbbe5545a40ae01cc' => 'View Journal Details Number (',
    '0b737639972b9c5fdd61b3979b6de804' => '🔙 Back',
    '60745bd1aaff402d391453d20af13125' => 'Government Procedures',
    '5bef496e759132f8b81631191ad6f397' => '🏛️ Government Procedures',
    'bb08598c9ebe28b0d373d569db8268b3' => 'Procedure Type:',
    '33fa00f833da711b4fed970da2d1aa9c' => 'Value Added Tax',
    'b0a45249326c8c263ec47b3fb4a89a63' => 'Business Profits Tax',
    '00979fcad24fd693bc523527d8ba9efb' => 'Zakat',
    'e71af99628c3316cfbb5ecb4350be1cb' => 'Document Number (Optional):',
    '089643fe5399d163f7dbe488c52277b1' => '➖ Deduct',
    'e9f5ef6f258f4b9c3d4ecde7db2f4dee' => '📋 Latest Operations',
    'f58d38d563d8673bebdef027c9fd0865' => 'Description',
    'd6949124cf6075639bc407a82eaeff46' => 'Document Number',
    '6a2b6758d275fd48b051d592fb7dd858' => 'Actions',
    'e1e8d34b46113f51cb48d71cf4718c41' => '" class="btn btn-sm btn-danger" onclick="return confirm(\'Are you sure?\')">🗑️',
    '94c25ffb58a59b388fa9c5d9e12d9b15' => 'Client Dashboard',
    '5c4e4796c057ab0d764ed1c60c43dc1f' => 'Logout',
    '89cfe26b1a8796b46caca6bc0d6ac6b5' => '🔒 Change Password',
    '0274f6c70a4f32872ca57ad08b877bb1' => 'Current Balance',
    '1cf0671a9945c60e39a468953ff35593' => 'Insurance Balance',
    'ac75a5ae17a640d2ef8b39fbe54ecc94' => '📦 Containers',
    '1ac91dd2a8d2f81b4c1fb1a00d4d012e' => 'Number',
    '1253eb564248a3567c599b1752db6ad7' => 'Status',
    '1881100f57fde91a7e08272ac4fd0d89' => 'Driver',
    '9b8129a7948af64fbc9023a3fc935cc8' => '💳 Account Statement',
    '1ea4e935fa9365358d3f6ae6dfa836da' => 'Container',
    '3db429f672203b9f97c72ab9783c832d' => 'New Password:',
    '061401dc3f165ecb0f56f8a811c80a17' => 'Update',
    '01620d233e635f515d4650d20aa911ff' => 'begin_transaction();

    try {
        // Get payment transaction data
        $stmt = $conn->prepare("SELECT t.amount, t.related_claim_id, t.client_id, t.description, t.payment_method, c.name AS client_name 
                                FROM transactions t
                                JOIN clients c ON t.client_id = c.id
                                WHERE t.id = ? AND t.type = \'In\'");
        $stmt->bind_param("i", $id);
        $stmt->execute();
        $res = $stmt->get_result();

        if ($row = $res->fetch_assoc()) {
            $amount = $row[\'amount\'];
            $claim_id = $row[\'related_claim_id\'];
            $client_id = $row[\'client_id\'];
            $description = $row[\'description\'];
            $payment_method = $row[\'payment_method\'];
            $client_name = $row[\'client_name\'];

            if ($claim_id > 0) {
                // 1. Update payment approval status
                $stmt1 = $conn->prepare("UPDATE transactions SET approval_status = \'approved\' WHERE id = ?");
                $stmt1->bind_param("i", $id);
                $stmt1->execute();

                // 2. Get original claim data
                $stmt2 = $conn->prepare("SELECT amount, paid_amount FROM transactions WHERE id = ?");
                $stmt2->bind_param("i", $claim_id);
                $stmt2->execute();
                $res2 = $stmt2->get_result();
                $claim = $res2->fetch_assoc();
                $claim_amount = $claim[\'amount\'];
                $paid_amount = $claim[\'paid_amount\'];
                $new_paid_amount = $paid_amount + $amount;

                // 3. Determine new claim status
                $status = ($new_paid_amount >= $claim_amount) ? \'paid\' : \'partial\';

                // 4. Update original claim
                $stmt3 = $conn->prepare("UPDATE transactions SET paid_amount = ?, status = ? WHERE id = ?");
                $stmt3->bind_param("dss", $new_paid_amount, $status, $claim_id);
                $stmt3->execute();

                // 5. Add record to cashbox table
                $notes = "Claim payment: " . $description . " - Client: " . $client_name;
                $stmt4 = $conn->prepare("INSERT INTO cashbox (transaction_id, client_id, type, source, description, method, amount, created_at, notes) 
                                         VALUES (?, ?, \'In\', \'Client\', ?, ?, ?, NOW(), ?)");
                $stmt4->bind_param("iissss", $id, $client_id, $description, $payment_method, $amount, $notes);
                $stmt4->execute();

                // 6. Update client balance
                $stmt5 = $conn->prepare("UPDATE clients SET balance = balance + ? WHERE id = ?");
                $stmt5->bind_param("di", $amount, $client_id);
                $stmt5->execute();

                // Commit transaction
                $conn->commit();

                echo "',
    'd7d494a9fde95f4f62a439a918fac378' => 'alert(\'Approved successfully and all operations executed\'); window.location=\'pending_transactions.php\';',
    '2ae1bce5446d09da9e8c46d11e1ed185' => 'alert(\'No related claim found\'); window.location=\'pending_transactions.php\';',
    '0aa60a824b2ebcc81f84e1f33b00c5ec' => 'alert(\'Transaction not found\'); window.location=\'pending_transactions.php\';',
    '944e7b99dbec65c0a8e2a5cab8d8d5e0' => 'alert(\'Error occurred: \" . $e->getMessage() . \"\'); window.location=\'pending_transactions.php\';',
    'deccfb7f6a0928cec6a0736611a605d2' => 'Pending Approval Transactions',
    '283788a969277958b5c67540f0c57322' => 'Balance System:',
    'cd5abb73917216bbc239a79731c5d447' => '- Claim: Deducted from client balance (increases debt)',
    '2cfc579639eff1a5e8c950d7cb4148d9' => '- Payment: Added to balance (reduces debt)',
    '51ba61959996fb3bfcd6c6e8a32b3a28' => 'Operations executed when approving payment:',
    '58da8951a38cf614ef8d6ec11565e5d6' => '1. Record operation in vault',
    'c9848a2dcd0f6181e47c78b0aef16fd6' => '2. Add amount to client balance (reduce debt)',
    '3ec51c5d5b0e37cd6a86185152b0b972' => '3. Update original claim status',
    '72127c68b94c07683f45b0e9a1221b5c' => 'Operation Type',
    '03b971c09dae4812ab6422f9db3f4657' => 'Amount (SDG)',
    'ac311bef0a2060d25551e1198916c2f3' => 'Amount (USD)',
    '8f31e70d53e0b24854d02b13746b6b9e' => 'Payment Method',
    '3d26c15d4e71e3fe35b20e91095696ff' => 'Reference Number',
    '7443e408e7c916ff4bf641234cf071d3' => 'Receipt Image',
    '155e7129d13d186cc59b21cfc8c200f0' => 'Action',
    '5e4291fb0b50c3ba2a0148d3d090af90' => 'No Receipt',
    'b584ac1f936583c4f8eebc203c90f09a' => '" onclick="return confirm(\'Confirm approval? All related operations will be executed\')">Approve',
    'eaec5eff8d43756beaef48599379628c' => 'Not Available',
    '32b4d99bf68c8842498f89945fc495eb' => 'Add Payment Journal',
    'd29924c09fd5c3ca78b5145c1cee2d1a' => '➕ Add Payment Journal',
    '51f74a8b076b07d76c7a9a506df882e2' => 'Statement:',
    'c39ac62e058fa025ac39dab2e3bc3be9' => 'Shipping Commissions',
    'ea9008a1497e97e3053fc6db45c172c2' => 'Client Name (Optional - not saved):',
    'df67abb72edac932e1c42aff490a3d3f' => '💾 Save Journal',
    '6e3f0d8bbe7e859df5f1782eadaae5f6' => '📋 View Payment Journals',
    '258b79699cdc13eadbb07acfd6c5c955' => 'Edit Receipt',
    '07af9491778a021fe075d0021e66a668' => '✏️ Edit Receipt',
    '31588c37a7907a6fc7f5928c6167721f' => 'Transaction Type:',
    '5f1b122e2e5a1cb9c099f1cdb274c891' => '>Claim',
    '6dbf5bfb6043d29b7d20faf8a05bdff3' => 'Amount (Pound):',
    'd3d8e5923eeebe79e1f19d69668cf831' => 'Container:',
    '7934eda614cb101aa34624b80b4d5865' => 'Exchange Rate (Non-Editable):',
    '79025b702067a2776cd302115763b0b7' => '📄 Sales Invoices List',
    '8ac9e3e4726af205320e7db9e10e5533' => '📋 Sales Invoices List',
    '9087c3760da70dd2f91a2212f83b94db' => '✅ Invoice saved successfully',
    '825569612e9cbf65d1a13335cdb8145c' => 'Buyer',
    '6052c9c03bc09c9ed787b968287395f0' => 'Cartons',
    '931f803bd878422870b2b7b1da889192' => 'Value',
    'd82ca82c1d4325ac4dd8e29cf9103e15' => 'Options',
    'f4525b81aa7f6ac4f666b444ccaae8a5' => '" class="btn btn-sm btn-warning">Edit',
    'dac20612258989aa3ca9fe024e9f33af' => '" class="btn btn-sm btn-info">Print',
    'f7d88e07ad7392a554c3b8a7036775a8' => '" class="btn btn-sm btn-danger" onclick="return confirm(\'Are you sure you want to delete?\')">Delete',
    '02f4d8072eb76bab84a0ec247b0c973c' => '➕ New Invoice',
    'fdbe995d60239ffc45ed0fd8c943c5c5' => 'Print Payment Journal',
    'bff6a71a14aa3eb527d58abf4b77cd75' => 'Shipping Commissions Payment Journal No. (',
    '0af54f8be1a48e211239b511f584d44c' => 'Disbursed Amount (Pound)',
    'b1b5dd3b1c3e025b080b89bd839f3d7a' => 'Amount in Dollars (USD)',
    '36aa0a30c1daf4e0ac003bf258490652' => 'Notice',
    '227d9c9cfeac24db9e8705624050959b' => 'Receipt',
    'ac771501173e290f05250eeb005ccb74' => 'Stamp and Signature',
    '99d8db4a8d2079b3e64321df4038d158' => 'Ports Payment Form',
    '00a5f9493b4163addf0fed605c178383' => '🧾 Ports Payment Form',
    '6596d3615b57e01ca5e745fa51ebd31f' => 'Authorization Expenses',
    '8382e5349507f2da2964515bec48fc34' => 'Statement',
    '0d4de28c50f258d1286355245c8ee456' => 'Preview',
    'cbb4a17e9bff7834990d335c38645877' => 'Post',
    '474fdb7a60c73d2c91c7d903b17c1702' => 'Invoices',
    '8c993e154b4c2cf84a931ab8876afca6' => ';

document.getElementById(\'clientSelect\').addEventListener(\'change\', function () {
  const selected = this.options[this.selectedIndex];
  document.getElementById(\'clientCode\').value = selected.dataset.code || \'\';

  // Fetch containers
  const id = this.value;
  fetch(\'get_client_containers.php?id=\' + id)
    .then(res => res.json())
    .then(data => {
      let containerSelect = document.getElementById(\'containerSelect\');
      containerSelect.innerHTML = \'',
    'f9a9024ecaf384f2beac3ce294ea6d3d' => 'Stamping Payment Form',
    '5286fc1cce5edf13c3407a1bc2fa8681' => '🧾 Stamping Payment Form',
    '00ed0e7d67a6db536d7234334627521c' => 'Client Login',
    '64259b96eee7eb1f753ed04e8383d4ec' => 'Client Code or Phone Number',
    'bcb75ee312b1d923829d8043399c9273' => 'Password',
    '269168cf4feb37b4c839c3d91dca4178' => 'Login',
    '2b6bfa7428f8e12aa438affa05b45225' => 'Add Client',
    '645ac2eea18bb0e9629698314690be48' => '➕ Add New Client',
    '504c65fb07354740971370d464913279' => 'Name:',
    '54daff14fd9dd3405909c18d754e352a' => 'Code:',
    '2515318aec5b7548e8cfc2ca7a59c5e4' => 'Phone Number:',
    '63e8a962675dc9d47bee5c54be18eff2' => 'Password:',
    '7fdd4724a667767c97bf4c01c15cf166' => '👈 Back to Clients List',
    '5e2bbe912dff0d91c2d42673288693e4' => 'Add Container',
    'a0eece76a8532adee140f40b398abd55' => 'Add New Container',
    '60107f40791c57f5ab4fc0d4d6a73d52' => '⚠️ Container number already used.',
    '94115ad38fb576a1002bcd73b003c72b' => '⚠️ Loading number already used.',
    '4b9e44cc5853765682ec813039f8cb0f' => '⚠️ Please fill all required fields.',
    '4dfda374ec8b7fdb60bd7e02cf3f3643' => '✅ Container saved successfully!',
    'fa2ad1fa9b3e5ae82cef9e4c24460847' => 'Client Information',
    'a6f9d2ebc783b91765854c2a73fa4f99' => 'Client Number *',
    '0f6bc678918dd71dccea94be1cfcced7' => 'Basic Information',
    '78909916efeafe36843ab13053539af5' => 'Shipping Date *',
    '17c1355a2cce45e9f6d2719ce7429748' => 'Container Details',
    '8d03a7e3149d6b7b6867681d1ce52010' => 'Container Number *',
    'e78d57e521d6d17ea3c8957d62ff0cdd' => 'Shipping Information',
    'ac3b69c988b602ae70288d51ec7dc420' => 'Weight (Ton)',
    'd5a601e7ca23db908d10f736355bb15c' => 'Additional Information',
    'b27ea934ef895e308ed04667b5427a24' => 'No',
    'e1dadf4c7cc871dfcd0c0ad4ec876a26' => 'Yes',
    '871a087a1dfec25556cebd089f73b9ee' => 'Save',
    '2cb0b85c56f6feed1423ba82a117bd96' => 'Reset',
    '0deab6d37451c3283510ea4472d6d882' => 'Add Employee',
    '3d6a333c58b762faa0795989f54a3f00' => '➕ Add New Employee',
    '9ba1c7cfb742d897ba133e87f17b635e' => 'Full Name:',
    '00ed040501ccb3340276fbc188d27d4e' => 'Username:',
    '832b181b9700a4427d3eee48e184c91c' => 'Email:',
    'b2279fd4382769ac91bf4862444c4563' => 'Role:',
    'f0e4d618906a05ec0d15a71eb9a0b918' => 'General Manager',
    '6cc850accec85ee9302159296c85c7c3' => 'Accountant',
    '80de137b1e150cd3a19e2b1d4c8c07a9' => 'Office Manager',
    '3f3f7de97dee0c1e5d00979ce60d4f21' => 'Status:',
    '918499f2af24b8d267ded9e664e31e7f' => 'Active',
    '60dfc10f7754dc88b3ac20038dee037b' => 'Inactive',
    '8286e1e12ec85efd0c53228ba239666d' => 'Office:',
    '98b40f2b5a549cdcdb0b7db31efddac2' => 'Port Sudan',
    '078ae17540df91985a5783e57f807f0e' => 'Atbara',
    '45554587d85e89e856ca49e721ad8333' => 'China',
    '6ec74445201e6334986a60e105e858eb' => 'Save Employee',
    '7810bcbbe2ccf6e1b8ba723072652ee9' => '⬅ Back to Employees Management',
    'a3e9f4ddc7d984a51cd8e2c2dc0f6ac5' => 'Edit Invoice',
    '826c80bdbb0bea72fe436ff287b37627' => 'Invoice Number:',
    'ededa0cc48da76e2b0833d7c783fd3e6' => 'Buyer Name:',
    '6aa60b42efdfda2be968ad1fc1027f9d' => 'Item:',
    'd3ff22c56211d4e749cdea07a8da8c9e' => 'Invoice Value:',
    '607bd5c8b7982bfb4d7ebf946c74b35d' => 'Added Value:',
    '7ea98808296c3ce717f699ccd0abc249' => 'Add Container - China Office',
    'de8bb3db6912b7c1c1fd5662db48b37a' => '➕ Add Container - China Office',
    'ea109d56ee774dd2804762fe325ec2c3' => 'Ship',
    '9408fb43e2ea8854a72733e45c2440ad' => 'Save Container',
    '112cc004ab63f2bde2af63e719005b35' => '📚 Business Operations',
    '4dcee6c740bc443b739eb2afcbdabc77' => '📑 Register Claims',
    '7711115bc7658247abf327c36d46fa23' => '➕ Add Register Request',
    'e37df154ad9f29a31899159aab2c8cb7' => '📋 Register Requests List',
    '7ab82015d2694dd92bc390287018a27b' => '🧾 Expenses on Purchases',
    '890cc0b4d24a999dbfa30183bea2e826' => '➕ Add Expense on Purchases',
    '94531aa741f47cabc14a3440bc263b12' => '📊 Expenses Report',
    '90b068c579ae375d6d161afb19185519' => '📦 Sales Management',
    '476807b22177678b180c7761a93c9f04' => '➕ Add Invoice',
    '45ad306121f73302c1d6ca763038658a' => '📄 Invoices List',
    '9baf07c09edd52929803c6d32827bf7f' => 'View Register Request',
    '2c7faeca6e956694076c870a568c088e' => '📄 Register Request Details',
    '58a603761b0022b01d780c644343df69' => 'Goods Type',
    'c58a9f13efd6e4fc2deb31b506a1e0d0' => 'Certificate Number',
    'dcfa00cfbcacd7492372825e2d5690bb' => 'Customs Amount',
    'f9211733b849a99f6c9c7dd0cbbc3092' => 'Refund Value',
    '5876a3aecd21e251f82ddb2823543094' => 'Refund Type',
    '50c300fb546eed2a992553301df9c57e' => 'Driver Name',
    'ac9405a43de9da2cc20241b3d7a2cee0' => 'Driver Number',
    '55bce517502766ddcb9995de7a9c20de' => 'Request Date',
    'd45782854238e80fbe11464e0cd02df1' => '" class="btn btn-warning">✏️ Edit',
    'fd03c5535322178c76b78716290d8a0a' => '" class="btn btn-info" target="_blank">🖨️ Print',
    'e891d609ebca6ca6d13b9f92cc08ff7d' => 'Edit Expense',
    'e2da091242e9513a152db68c20c7902a' => '✏️ Edit Expense',
    '301f2eec5e620f66fa6aa22089328d98' => 'Ababil Dashboard',
    'cd1abf5768f6fc24288758e63bb31092' => 'Ababil',
    '3aa85786999f477cb8c840ebdd3b9f37' => 'Home',
    '8dee682a9bfa11b30fba46e38c7d09e7' => 'Clients',
    'c0d19f92116ebdf31f48b0f1e828ad80' => 'Containers',
    'd35a0b839a1462d276f9c97ffae4af01' => 'Vault',
    '4d4e102c5ec2e8e53c9d5bd2e123cf2e' => 'Reports',
    '426510a46b5cb777437985f049daa94e' => 'Menu',
    'c45c8b4321f3681d042ff52efb9f4def' => 'Business Operations',
    'b66a8278411b4ca58977c601a8827afd' => 'Registers',
    '40a766497ed9362b692de308ac17335b' => 'Payment Journals',
    'fa31fbb3ff6e4c1e87786e256f6a966b' => 'Documents',
    '1f60020959de67fb0df187c7ce21ffe6' => 'Settings',
    '68674888923f156e1bc4b765e8b9e51f' => 'Employees',
    '26b1b2b0a4193aabcc33455732de89ac' => 'English',
    '7834cf6e66ab20a50f4aaf3e2e999050' => 'In Ababil Company Dashboard',
    '7188a14866d725d66226b485953d2254' => 'Select from the menu above to navigate between sections.',
    'bbb7c4d3f1bf48a70117e9be6e3d5707' => 'Clients Count:',
    'd98c7f5957fe9223105ee38059d8ad6b' => 'Containers Count:',
    '53c7539d6c1a3aba56eacb9a0b7cad7d' => 'Current Balance:',
    '90970f099c18f387ce80f410580c4f20' => 'Insurance Balance:',
    '48466e10aa0fe46509fd6e4c9426e4e0' => 'Containers Near Floor Period',
    '3ce34139c276dfdc154a1168224a5666' => 'diff(new DateTime($c[\'created_at\']))->days ?> days',
    'affbe22d565ace436bea99e5790cca0e' => 'No containers near floor period.',
    'dac353e7991bb704a65712871311e530' => 'Containers Exceeding 30 Days',
    '9cbe3a110b2848d48c0da89e5676abcd' => '" class="btn btn-sm btn-outline-primary">View',
    '415d041bfd7563f5496ded32d767b8fc' => 'No containers exceeding 30 days without status.',
    '5567b14de6dde866cf034b9ab3ebbc47' => 'Latest Financial Operations',
    '2414010d3f4cc39bac98d056134487d6' => 'const syncBtn = document.getElementById(\'syncBtn\');
const syncStatus = document.getElementById(\'syncStatus\');

// Determine sync file based on environment (local or server)
const isLocal = location.hostname === \'localhost\';
const syncScript = isLocal ? \'sync_send.php\' : \'sync_receive_all.php\';

function syncData() {
  syncBtn.disabled = true;
  syncBtn.innerHTML = \'',
    '3e494907b84c6d34a25575bb0bea2ad0' => 'Synchronizing...\';
  syncStatus.innerHTML = \'⏳ Synchronizing...\';
  syncStatus.style.display = \'block\';

  fetch(syncScript)
    .then(res => res.text())
    .then(data => {
      syncStatus.innerHTML = \'✅ Synchronized successfully!\';
      syncBtn.innerHTML = \'',
    '5d5fe7a1468c06604659cc601434a28d' => 'Synchronize\';
      console.log(\'✅ Response:\', data);
      setTimeout(() => {
          syncStatus.style.display = \'none\';
          location.reload(); // Reload page after sync
      }, 3000);
    })
    .catch(err => {
      syncStatus.innerHTML = \'❌ Connection failed or server unavailable.\';
      syncBtn.innerHTML = \'',
    'caa79d92987d29d0b8c689fdd8486eac' => 'Edit Log',
    '23444f122a094996f85f1ebcc06340ce' => 'Edit and Operations Log',
    '554362411caa4609d67f0ff951efe269' => 'All Employees',
    '48efb51eb6a843a15f54a39870ac17aa' => 'All Operations',
    '1593e7ed87c59691063a724e8a95e1fd' => '>Add',
    'a74ec232214bea3fb1f8ea26dc8d0dbb' => '>Edit',
    'b6b512899640443e5c59cade9c764b39' => '>Delete',
    '1490a1107292b42d54938b3cfe0995e7' => '🔍 Filter',
    '99eee1771ff75f484e21d7450939fcb5' => 'Operation',
    '47a191aea16b5380cc797a44e35ed562' => 'Number',
    '7eca2366ca57c24e5c9909f61e9296d3' => 'Details',
    'bd2136684f70cd21254943fb159c236c' => '🧾 Add Sales Invoice',
    '265dbcf9d923efbc190bbf6a7472dc4b' => '📅 Date:',
    'fca376f8fa92b07173c63f014f4691a0' => '🔢 Invoice Number:',
    '9edfcbc3a16f962b7954534fa01ee261' => '👤 Buyer Name:',
    'ecb5735ed923579444f89ba298e9f746' => '📦 Item:',
    'aa03fb5ff0114c723f99f8040aa22dd9' => '📦 Carton Count:',
    '49afba8c54e524cc18bea0e1a92a06f5' => '💰 Invoice Value (Pound):',
    'f68c2bfcc5a66c1112a19a8b0adb6697' => '💸 Added Value (Pound):',
    'efb4fc5ae7eb2bb7c672d64415c13b4a' => '💾 Save Invoice',
    'fd41daada1b5c0f1c55d1a20897446e6' => 'Customs Added Value:',
    '89c5c2819decac02c99954ba829ea860' => 'Manifest Added Value:',
    'e9a4d179853f678448961d4af4eb33b9' => 'Customs Business Profits:',
    '4fb5dc03a2484d7e6fd35b91ff0d454e' => 'Ports Added Value:',
    '27a58ddad7da18117ab9b292d8c392fb' => 'Floors Added Value:',
    '820f3378ff6c7efc6d77de12e445b1c5' => 'Authorization Added Value:',
    '12adac1fc4b09db6f820ab7541f1eae7' => '🧾 Inventory Page',
    '3fd00e1ca27bcb25636bbe88c340585c' => '📦 Register Inventory Issues',
    '203dcbfce9977ec3e4e89b9e6aa9e90a' => 'Missing Goods',
    'e43e9320b48e18c75f5cf5af5a257a49' => 'Count:',
    'bfeccf75451c90630ad3d0b7451ada2b' => 'Value:',
    'b0f0f22415b1fe770f8d47824870a1ce' => 'Damaged Goods',
    '3a73da7d909a2b085a668f3ff04cbcb5' => '💾 Save Data',
    '4849984b28b8bf97cbb2e7716dc309eb' => '⚠️ No client with this ID',
    'ed87d64d5edda9eb00badc18c456fcd2' => '👤 Client Data',
    'eee75181b37397e9572ba5eb43a6d9b4' => '← Back',
    '54f02ae15e5f85f6c6aa7fd6353040b5' => 'Code:',
    'e8f715f4de84104da1df9f05b13fd7b7' => 'Added Date:',
    'd2d1455f13c40b388b5255afc221c391' => '💵 Balance in Dollars:',
    '13a93ee39f5ae74b974bd8b9d4e6fb62' => '💵 Insurance in Dollars:',
    'a6072e28544abfadd730f0c3838acf67' => '📑 Client Account Statement',
    'f921ed7983103417d2efedfb0680c51e' => 'Amount $',
    '202597ce7fde28502174d797e9ca7210' => 'Paid',
    '252756add550afb50dc09f3a26ad24e6' => 'No transactions recorded for this client',
    '7ad406fa49fb4b3a2ec4c2eda68416f1' => '➕ Add New Transaction',
    '677e1736314e9aa5e52fa3458f5600af' => 'Select Type',
    '538a6f2ab9b44c057912f82f5ee394cf' => 'Claim',
    'c196269bb84c62f54a582392e85eddff' => 'Payment',
    '7e2df315d14e4df09856c571c7c7cbb0' => 'Refund',
    'e017e22ab2f698356a580eb0cebf8fec' => 'Link to Claim',
    'c566940cdf09874ab78c7e0094d5f6bb' => '-- Select Claim --',
    '77166a37eaacc6707eb46015e607d02f' => 'Insurance',
    '957f15f48a9a088799fba70e499f3142' => 'Select Method',
    'a2c63b7cbb88866abf73fe8ac8bb3842' => 'Bank',
    'acc7e08672a93660332bdecf2023df5d' => 'Select Container',
    'ee2ea665657b657943fe5539efa330f2' => 'Exchange Rate',
    '1ff9eedb4c0554cef83fc52f59cf1c48' => '📦 Linked Containers',
    'ac18ede749c73c1ed09d97376b234b4b' => 'Loading',
    'b7ea6fa193da76afc39b0ca0b303a365' => 'Carrier',
    '7051f3db2d2d01f3cd9b7c9ef0db01c2' => 'No containers registered',
    '6b4073d6a153c408e22f040b0dbc1a7c' => 'document.addEventListener(\'DOMContentLoaded\', function() {
    const typeSelect = document.getElementById(\'type-select\');
    const descGroup = document.getElementById(\'description-group\');
    const descSelect = document.getElementById(\'description-select\');
    const relatedGroup = document.getElementById(\'related-claim-group\');
    const relatedSelect = document.getElementById(\'related-claim-select\');
    const registerGroup = document.getElementById(\'register-group\');
    const paymentGroup = document.getElementById(\'payment-method-group\');
    const containerGroup = document.getElementById(\'container-group\');
    const containerSelect = document.getElementById(\'container-select\');
    const amountInput = document.getElementById(\'amount-input\');
    
    // Update fields based on transaction type
    function updateFields() {
        const type = typeSelect.value;
        const relatedClaimSelected = relatedSelect.value !== \'\';
        
        // Manage payment method fields: show for Claim/Payment, hide for Refund
        if (type === \'Refund\') {
            paymentGroup.style.display = \'none\';
        } else {
            paymentGroup.style.display = \'block\';
        }

        // Manage related claim fields: show only for Payment
        if (type === \'Payment\') {
            relatedGroup.style.display = \'block\';
            // Hide description field only if related claim is selected
            descGroup.style.display = relatedClaimSelected ? \'none\' : \'block\';
            descSelect.required = !relatedClaimSelected;
        } else {
            relatedGroup.style.display = \'none\';
            descGroup.style.display = \'block\';
            descSelect.required = true;
            relatedSelect.value = \'\';
        }
        
        // Manage container field: hide for Payment with linked claim
        if (type === \'Payment\' && relatedClaimSelected) {
            containerGroup.style.display = \'none\';
            containerSelect.removeAttribute(\'required\');
        } else {
            containerGroup.style.display = \'block\';
            containerSelect.setAttribute(\'required\', \'required\');
        }
        
        // Manage register fields: show only for Claim if description is "Register"
        if (type !== \'Payment\' && descSelect.value === \'Register\') {
            registerGroup.style.display = \'block\';
        } else {
            registerGroup.style.display = \'none\';
        }
        
        // Manage description content: for Refund, description is "Insurance" only
        if (type === \'Refund\') {
            // Put only one option: Insurance
            descSelect.innerHTML = \'',
    '8b6630c7382c7efa59c92d163d0756e8' => 'Client Account Statement - ${document.title}',
    'c85cad4c9c5301b71b3b453fd2530478' => 'Official Receipt',
    '7f8e5af58c1f938bc410d769ea811ff2' => 'Tax ID:',
    '60623c2a59fe9239bf3509f33a16ea0e' => 'Financial Receipt',
    '74f4bd67ddd50e311dfb88ddc5a3e8c0' => 'Client Code:',
    'f8e606012fd584eedddccfea08e08c3a' => 'Transaction Date',
    '4bb6246670d81ec1602e7b47c81e4b97' => 'Transaction Type',
    '4fb1e8f7fadc575b2beb8b7cd9e9b00d' => 'Amount in Dollars',
    '5a835a31e0fdc6d3119acd2e85ff5d87' => 'Employees Management',
    '5a780cb68532d8569719f32d449f9127' => '👥 Employees Management',
    'b087ae77be537da9071f185683db46b1' => '⬅️ Back to Home',
    'ea17c89c88ae983bbea8671bcf87407f' => 'All Roles',
    'cd0171bacbff55b27c3724e5b912b225' => 'All Offices',
    'c2193d082cf2ea1041cdc71f0cea334f' => 'All Statuses',
    '90f9115ac9cd5e44c56fe0df5be69170' => 'Full Name',
    'f089c39364fd318f28492eff00775e22' => 'Username',
    '1647921065357285653152411d34529a' => 'Role',
    '177d253372adc8ad4674b10ed1ccb4af' => 'Office',
    '2436aacc188610f298d8422e7d877233' => 'Email',
    '231a22de0336a4dc0a07920ad62921a3' => '" class="action">Edit',
    '1123369f91c4355132f6edcbb1ae1e84' => '" class="action" onclick="return confirm(\'Are you sure you want to delete?\')">Delete',
    '7b7e7021828b64151d598556090425ed' => 'query("
    SELECT 
        c.id, 
        c.container_number, 
        c.client_name, 
        c.entry_date,
        c.bill_of_lading_date,
        (SELECT MIN(created_at) FROM container_position_history 
         WHERE container_id = c.id AND status = \'Arrived\') AS arrival_date,
        (SELECT MIN(created_at) FROM container_position_history 
         WHERE container_id = c.id AND status = \'Transported by Land\') AS land_transport_date,
        (SELECT MIN(created_at) FROM container_position_history 
         WHERE container_id = c.id AND status = \'Delivered\') AS delivery_date,
        (SELECT MIN(created_at) FROM container_position_history 
         WHERE container_id = c.id AND status = \'Empty Returned\') AS empty_return_date
    FROM containers c
    WHERE c.release_status = \'No\'
");

if ($delayed_query->num_rows > 0) {
    while ($row = $delayed_query->fetch_assoc()) {
        $delay_reasons = [];
        $days_overdue = 0;
        $shipping_date = new DateTime($row[\'entry_date\']);
        $current_date = new DateTime();
        
        // Calculate days since shipping
        $days_since_shipping = $current_date->diff($shipping_date)->days;
        
        // Bill of Lading delay (10 days from shipping)
        if ($days_since_shipping > 10 && !$row[\'bill_of_lading_date\']) {
            $delay_reasons[] = \'Bill of Lading delay\';
            $days_overdue = max($days_overdue, $days_since_shipping - 10);
        }
        
        // Tashitim delay (20 days from B/L - only if B/L exists)
        if ($row[\'bill_of_lading_date\']) {
            $bl_date = new DateTime($row[\'bill_of_lading_date\']);
            $days_since_bl = $current_date->diff($bl_date)->days;
            
            if ($days_since_bl > 20 && !$row[\'tashitim_date\']) {
                $delay_reasons[] = \'Stamping delay\';
                $days_overdue = max($days_overdue, $days_since_bl - 20);
            }
        }
        
        // Arrival delay (60 days from shipping)
        if ($days_since_shipping > 60 && !$row[\'arrival_date\']) {
            $delay_reasons[] = \'Arrival delay\';
            $days_overdue = max($days_overdue, $days_since_shipping - 60);
        }
        
        // Land transport delay (4 days from arrival - only if arrival exists)
        if ($row[\'arrival_date\']) {
            $arrival_date = new DateTime($row[\'arrival_date\']);
            $days_since_arrival = $current_date->diff($arrival_date)->days;
            
            if ($days_since_arrival > 4 && !$row[\'land_transport_date\']) {
                $delay_reasons[] = \'Land transport delay\';
                $days_overdue = max($days_overdue, $days_since_arrival - 4);
            }
        }
        
        // Delivery delay (3 days from shipping)
        if ($days_since_shipping > 3 && !$row[\'delivery_date\']) {
            $delay_reasons[] = \'Delivery delay\';
            $days_overdue = max($days_overdue, $days_since_shipping - 3);
        }
        
        // Empty return delay (7 days from shipping)
        if ($days_since_shipping > 7 && !$row[\'empty_return_date\']) {
            $delay_reasons[] = \'Empty container return delay\';
            $days_overdue = max($days_overdue, $days_since_shipping - 7);
        }
        
        if (!empty($delay_reasons)) {
            $delayed_containers[] = [
                \'container_number\' => $row[\'container_number\'] ?: \'Not specified\',
                \'client_name\' => $row[\'client_name\'],
                \'delay_types\' => implode(\' / \', $delay_reasons),
                \'shipping_date\' => $row[\'entry_date\'],
                \'days_overdue\' => $days_overdue
            ];
        }
    }
}
// Define fields with labels
$fields = [
  \'container_number\' => \'Container Number\',
  \'carrier\' => \'Carrier Company\',
  \'client_name\' => \'Client Name\',
  \'code\' => \'Client Number\',
  \'bill_number\' => \'Bill of Lading Number\',
  \'category\' => \'Category\',
  \'registry\' => \'Register\',
  \'expected_arrival\' => \'Expected Arrival Date\',
  \'ship_name\' => \'Ship Name\',
  \'custom_station\' => \'Custom Station\',
  \'release_status\' => \'Released\',
  \'company_release\' => \'Released by Company\',
  \'bill_of_lading_status\' => \'Bill of Lading Status\',
  \'tashitim_status\' => \'Stamping Status\'
];

// Receive filters/sorting/page from URL with defaults
$filters = [
  \'field1\' => $_GET[\'field1\'] ?? \'\',
  \'value1\' => $_GET[\'value1\'] ?? \'\',
  \'field2\' => $_GET[\'field2\'] ?? \'\',
  \'value2\' => $_GET[\'value2\'] ?? \'\',
  \'field3\' => $_GET[\'field3\'] ?? \'\',
  \'value3\' => $_GET[\'value3\'] ?? \'\',
  \'field4\' => $_GET[\'field4\'] ?? \'\',
  \'value4\' => $_GET[\'value4\'] ?? \'\',
  \'field5\' => $_GET[\'field5\'] ?? \'\',
  \'value5\' => $_GET[\'value5\'] ?? \'\',
  \'from\' => $_GET[\'from\'] ?? \'\',
  \'to\' => $_GET[\'to\'] ?? \'\',
];

// Sorting
$order_by = $_GET[\'order_by\'] ?? \'id\';
$order_dir = $_GET[\'order_dir\'] ?? \'DESC\';

if (!array_key_exists($order_by, $fields) && $order_by !== \'entry_date\' && $order_by !== \'id\') {
  $order_by = \'id\'; // default
}
$order_dir = strtoupper($order_dir);
if (!in_array($order_dir, [\'ASC\', \'DESC\'])) {
  $order_dir = \'DESC\';
}

// Pagination
$items_per_page = 10;
$page = max(1, (int)($_GET[\'page\'] ?? 1));
$offset = ($page -1) * $items_per_page;

// Function to get filter options per field
function getOptions($field, $conn) {
  $opts = [];
  if (!empty($field)) {
    // Handle special status fields
    if ($field === \'bill_of_lading_status\') {
      return [\'not_issued\' => \'Not Issued\', \'issued\' => \'Issued\', \'delayed\' => \'Delayed\'];
    } elseif ($field === \'tashitim_status\') {
      return [\'not_done\' => \'Not Done\', \'done\' => \'Done\', \'delayed\' => \'Delayed\'];
    }
    
    $stmt = $conn->prepare("SELECT DISTINCT `$field` as val FROM containers ORDER BY `$field` ASC");
    if ($stmt) {
      $stmt->execute();
      $res = $stmt->get_result();
      while ($r = $res->fetch_assoc()) {
        $val = $r[\'val\'] !== \'\' ? $r[\'val\'] : \'Not specified\';
        $opts[] = $val;
      }
      $stmt->close();
    }
  }
  return $opts;
}

// Build WHERE conditions with Prepared Statements
$whereClauses = [];
$params = [];
$types = "";

// Process main filters (now 5 fields)
for ($i=1; $i',
    '7b323b45b85f5132e2a041b22aaaad95' => '0) {
  $whereSql = implode(" AND ", $whereClauses);
}

// Count total results (Pagination)
$countSql = "SELECT COUNT(*) as total FROM containers WHERE $whereSql";
$countStmt = $conn->prepare($countSql);
if ($countStmt) {
  if (count($params) > 0) {
    $countStmt->bind_param($types, ...$params);
  }
  $countStmt->execute();
  $countRes = $countStmt->get_result()->fetch_assoc();
  $total_items = $countRes[\\\'total\\\'];
  $countStmt->close();
} else {
  die("Query error (results count): " . $conn->error);
}

// Data query with ordering and pagination
$sql = "SELECT containers.*, registers.name AS registry_name, 
               (SELECT status FROM container_position_history 
                WHERE container_id = containers.id 
                ORDER BY created_at DESC 
                LIMIT 1) AS latest_position
        FROM containers 
        LEFT JOIN registers ON containers.registry = registers.id 
        WHERE $whereSql 
        ORDER BY `$order_by` $order_dir 
        LIMIT ? OFFSET ?";

$stmt = $conn->prepare($sql);
if ($stmt) {
  if (count($params) > 0) {
    $params[] = $items_per_page;
    $params[] = $offset;
    $full_types = $types . "ii";
    $stmt->bind_param($full_types, ...$params);
  } else {
    $stmt->bind_param("ii", $items_per_page, $offset);
  }
  $stmt->execute();
  $result = $stmt->get_result();
} else {
  die("Query error: " . $conn->error);
}

// Function for column sorting with ASC/DESC toggle
function sort_link($label, $field, $current_order_by, $current_order_dir, $extra_query) {
  $dir = "ASC";
  $arrow = "";
  if ($current_order_by === $field) {
    if ($current_order_dir === "ASC") {
      $dir = "DESC";
      $arrow = "▲";
    } else {
      $dir = "ASC";
      $arrow = "▼";
    }
  }
  $qs = http_build_query(array_merge($extra_query, [\'order_by\' => $field, \'order_dir\' => $dir, \'page\' => 1]));
  return "<a href=\'?$qs\'>$label $arrow</a>";
}

// Function to display values with improvements (✅❌ and "Not available")
function displayValue($field, $value) {
  if ($field === \'release_status\' || $field === \'company_release\') {
    if ($value === \'1\' || strtolower($value) === \'yes\' || strtolower($value) === \'نعم\') return "✅";
    if ($value === \'0\' || strtolower($value) === \'no\' || strtolower($value) === \'لا\') return "❌";
    return htmlspecialchars($value);
  }
  if ($value === \'\' || $value === null) {
    return "Not available";
  }
  return htmlspecialchars($value);
}

// Function to display status with colors
function displayStatus($status, $type) {
  $statusLabels = [
    \'bill_of_lading\' => [
      \'not_issued\' => \'Not Issued\',
      \'issued\' => \'Issued\',
      \'delayed\' => \'Delayed\'
    ],
    \'tashitim\' => [
      \'not_done\' => \'Not Done\',
      \'done\' => \'Done\',
      \'delayed\' => \'Delayed\'
    ]
  ];
  
  $class = \'\';
  $text = \'\';
  
  if ($type === \'bill_of_lading\') {
    $text = $statusLabels[$type][$status] ?? $status;
    $class = $status === \'issued\' ? \'bg-success\' : 
             ($status === \'delayed\' ? \'bg-danger\' : \'bg-secondary\');
  } else {
    $text = $statusLabels[$type][$status] ?? $status;
    $class = $status === \'done\' ? \'bg-success\' : 
             ($status === \'delayed\' ? \'bg-danger\' : \'bg-secondary\');
  }
  
  return "<span class=\'badge $class\'>$text</span>";
}',
];